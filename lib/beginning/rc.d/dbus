#!/bin/bash

dbus_exists() {
    type -fPp dbus-daemon
}

dbus_start() {
    dbus_status || rm -f /run/dbus.pid
    dbus-uuidgen --ensure
    dbus-daemon --system --fork --nopidfile --print-pid ${DBUS_ARGS} > /run/dbus.pid
}

dbus_stop() {
    kill $(</run/dbus.pid)
    dbus_status || rm -f /run/dbus.pid
}

dbus_status() {
    pidfileexists /run/dbus.pid
}
