#!/bin/bash

dhcpd_exists() {
    type -fPp dhcpd
}

dhcpd_provides() {
    echo network
}

dhcpd_start() {
    dhcpd_status || rm -f /run/dhcpd.pid
    dhcpd -q -f ${DHCPD_CONF:+-cf ${DHCPD_CONF}} ${DHCPD_OPTS} ${DHCPD_IFACE} &
}

dhcpd_stop() {
    kill $(</run/dhcpd.pid)
    dhcpd_status || rm -f /run/dhcpd.pid
}

dhcpd_status() {
    pidexists /run/dhcpd.pid
}
